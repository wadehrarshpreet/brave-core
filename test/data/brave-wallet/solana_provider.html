<html>

<script>
  var connectedAccount = ''
  var signMessageResult = ''

  function solanaConnect() {
    window.solana.connect().then(result => {
        connectedAccount = result.publicKey.toString()
    }).catch(error => {
        connectedAccount = ''
    })
  }

  async function solanaDisconnect() {
    const result = await window.solana.disconnect()
    if (result == undefined)
      window.domAutomationController.send(true)
    else
      window.domAutomationController.send(false)
  }

  function getConnectedAccount() {
    window.domAutomationController.send(connectedAccount)
  }

  function isSolanaConnected() {
    window.domAutomationController.send(window.solana.isConnected)
  }

  function solanaSignMessage(message, encoding) {
    const encodedMessage = new TextEncoder().encode(message)
    window.solana.signMessage(encodedMessage, encoding)
      .then(result => {
        signMessageResult = result.signature.join()
        window.domAutomationController.send('result ready')
      }).catch(error => {
        signMessageResult = error.message
        window.domAutomationController.send('result ready')
      })
  }

  function getSignMessageResult() {
    window.domAutomationController.send(signMessageResult)
  }

</script>

<body>
</body>
</html>


